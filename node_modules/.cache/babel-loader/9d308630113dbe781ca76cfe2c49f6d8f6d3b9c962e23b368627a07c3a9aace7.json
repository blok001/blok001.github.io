{"ast":null,"code":"import _slicedToArray from\"/Users/davidbekic/Google Drive/bojan_wtf/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{PauseCircleOutline}from\"@mui/icons-material\";import{IconButton,Slider}from\"@mui/material\";import React,{useEffect,useState}from\"react\";import PlayArrowIcon from\"@mui/icons-material/PlayArrow\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var AudioPlayer=function AudioPlayer(_ref){var songs=_ref.songs,index=_ref.index,setIndex=_ref.setIndex,setImageClass=_ref.setImageClass;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),playing=_useState2[0],setPlaying=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),audio=_useState4[0],setAudio=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),userInteracted=_useState6[0],setUserInteracted=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),currentTime=_useState8[0],setCurrentTime=_useState8[1];var maxDuration=10;if(currentTime===maxDuration){setIndex((index+1)%songs.length);}useEffect(function(){console.log(\"index use\");if(audio&&userInteracted){audio.play();}},[index]);useEffect(function(){console.log(\"audio use\");var interval=setInterval(function(){if(audio){setCurrentTime(audio.currentTime);}},100);return function(){return clearInterval(interval);};},[audio]);var handlePlayPause=function handlePlayPause(){setUserInteracted(true);setImageClass(\"hoverImage\");setTimeout(function(){setImageClass(\"\");},2000);if(audio){if(playing){audio.pause();}else{audio.play();}}};var handleNext=function handleNext(){if(audio){setPlaying(true);setIndex((index+1)%songs.length);setPlaying(false);}};//   const handleKeyPress = () => {\n//     console.log(\"huh\");\n//     handlePlayPause();\n//   };\nvar handlePrevious=function handlePrevious(){if(audio){audio.pause();setIndex((index+songs.length-1)%songs.length);setPlaying(false);}};var handleSliderChange=function handleSliderChange(event,newValue){setCurrentTime(newValue);if(audio){audio.currentTime=newValue;}};if(audio){maxDuration=audio.duration;}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"audio\",{preload:\"metadata\",style:{fill:\"grey\"},src:songs[index].songFile,ref:function ref(element){setAudio(element);},onPlay:function onPlay(){return setPlaying(true);},onPause:function onPause(){return setPlaying(false);}}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(IconButton,{onClick:handlePlayPause,children:playing?/*#__PURE__*/_jsx(PauseCircleOutline,{}):/*#__PURE__*/_jsx(PlayArrowIcon,{})}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"200px\",marginLeft:\"8px\",display:\"flex\"},children:/*#__PURE__*/_jsx(Slider,{sx:{color:\"black\"},value:currentTime,onChange:handleSliderChange,defaultValue:0,max:maxDuration})})]})]});};","map":{"version":3,"names":["PauseCircleOutline","IconButton","Slider","React","useEffect","useState","PlayArrowIcon","AudioPlayer","songs","index","setIndex","setImageClass","playing","setPlaying","audio","setAudio","userInteracted","setUserInteracted","currentTime","setCurrentTime","maxDuration","length","console","log","play","interval","setInterval","clearInterval","handlePlayPause","setTimeout","pause","handleNext","handlePrevious","handleSliderChange","event","newValue","duration","fill","songFile","element","display","alignItems","width","marginLeft","color"],"sources":["/Users/davidbekic/Google Drive/bojan_wtf/src/MainArea/AudioPlayer.tsx"],"sourcesContent":["import { PauseCircleOutline } from \"@mui/icons-material\";\nimport { IconButton, Slider } from \"@mui/material\";\nimport React, { useEffect, useState } from \"react\";\nimport { Song } from \"../App\";\nimport PlayArrowIcon from \"@mui/icons-material/PlayArrow\";\nimport ArrowBackIcon from \"@mui/icons-material/ArrowBack\";\nimport ArrowForwardIcon from \"@mui/icons-material/ArrowForward\";\nimport PauseIcon from \"@mui/icons-material/Pause\";\n\ninterface AudioPlayerProps {\n  songs: Song[];\n  index: number;\n  setIndex: any;\n  setImageClass: any;\n}\n\nexport const AudioPlayer: React.FC<AudioPlayerProps> = ({\n  songs,\n  index,\n  setIndex,\n  setImageClass,\n}) => {\n  const [playing, setPlaying] = useState(false);\n  const [audio, setAudio] = useState<HTMLAudioElement | null>(null);\n  const [userInteracted, setUserInteracted] = useState(false);\n  const [currentTime, setCurrentTime] = useState(0);\n  let maxDuration = 10;\n\n  if (currentTime === maxDuration) {\n    setIndex((index + 1) % songs.length);\n  }\n\n  useEffect(() => {\n    console.log(\"index use\");\n    if (audio && userInteracted) {\n      audio.play();\n    }\n  }, [index]);\n\n  useEffect(() => {\n    console.log(\"audio use\");\n    const interval = setInterval(() => {\n      if (audio) {\n        setCurrentTime(audio.currentTime);\n      }\n    }, 100);\n    return () => clearInterval(interval);\n  }, [audio]);\n\n  const handlePlayPause = () => {\n    setUserInteracted(true);\n    setImageClass(\"hoverImage\");\n    setTimeout(() => {\n      setImageClass(\"\");\n    }, 2000);\n    if (audio) {\n      if (playing) {\n        audio.pause();\n      } else {\n        audio.play();\n      }\n    }\n  };\n\n  const handleNext = () => {\n    if (audio) {\n      setPlaying(true);\n      setIndex((index + 1) % songs.length);\n      setPlaying(false);\n    }\n  };\n\n  //   const handleKeyPress = () => {\n  //     console.log(\"huh\");\n  //     handlePlayPause();\n  //   };\n\n  const handlePrevious = () => {\n    if (audio) {\n      audio.pause();\n      setIndex((index + songs.length - 1) % songs.length);\n      setPlaying(false);\n    }\n  };\n\n  const handleSliderChange = (event: any, newValue: any) => {\n    setCurrentTime(newValue);\n    if (audio) {\n      audio.currentTime = newValue;\n    }\n  };\n\n  if (audio) {\n    maxDuration = audio.duration;\n  }\n\n  return (\n    <div>\n      <audio\n        preload=\"metadata\"\n        style={{ fill: \"grey\" }}\n        src={songs[index].songFile}\n        ref={(element) => {\n          setAudio(element);\n        }}\n        onPlay={() => setPlaying(true)}\n        onPause={() => setPlaying(false)}\n      />\n      <div style={{ display: \"flex\", alignItems: \"center\" }}>\n        <IconButton onClick={handlePlayPause}>\n          {playing ? <PauseCircleOutline /> : <PlayArrowIcon />}\n        </IconButton>\n        <div style={{ width: \"200px\", marginLeft: \"8px\", display: \"flex\" }}>\n          <Slider\n            sx={{ color: \"black\" }}\n            value={currentTime}\n            onChange={handleSliderChange}\n            defaultValue={0}\n            max={maxDuration}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}